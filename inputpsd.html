<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>pwd 组件</title>
    <meta content="width=device-width,user-scalable=no,initial-scale=1" name="viewport">
    <script src="js/jquery-1.10.2.min.js"></script>

    <link rel="stylesheet" href="css/dora.css"/>
    <script src="dist/js/dora.js"></script>
    <script>
        'use strict';
        $(function(){

            var _targetObj = $("[ui-type='reShow']");
           var $cloneInput = $(_targetObj).clone().css('display', 'block').appendTo('body');

//            $(_targetObj).on('keydown',function(){
//                console.log('----down---'+$(this).val())
//            })
//            $(_targetObj).bind('focus', function() {
//                var _this = $(this);
////                $(this)[0].type = 'tel';
//                setTimeout(function(){
//                    _this[0].type = 'text';
//                },1000)
//            });

            var targetNo = "";
            $(_targetObj).on('input propertychange',function(){
                var _that = this;
                var currentTxt = $(this).val();
                var newTxt = currentTxt.substr(currentTxt.length-1);
                console.log('---up----'+newTxt);
                targetNo += newTxt;
                console.log('---targetNo----'+targetNo);
                $cloneInput.val(targetNo);
                var mask = '';
                for(var i=0;i<currentTxt.length;i++){
                    mask += '*'
                }
                console.log('--mask---'+mask);
                setTimeout(function(){
                    $(_that).val(mask);
                },10);
            })
        })
    </script>
</head>
<body>
<input type="tel" id="pwd" ui-type="reShow"/>
<p>good</p>
</body>
</html>